<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1, width=device-width" />

  <link rel="stylesheet" href="../../../global.css" />
  <link rel="stylesheet" href="./EasyIndex.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap" />
</head>

<body>
    <div class="foreground">
      <div class="modeIndicator">
        <div class="buttonText" id="gamemode">Easy</div>
      </div>
      <div class="headingText" id="header">Song 1/5</div>
      <img class="hintIcon" id="hintIcon" src="../../../Assets/Info_alt_duotone.svg" />
      <button class="button1" id="option-1" value="1">Opt 1</button>
      <button class="button2" id="option-2" value="2">Opt 2</button>
      <button class="button3" id="option-3" value="3">Opt 3</button>
      <button class="button4" id="option-4" value="4">Opt 4</button>
      <div class="guessText" id="guessCount">Guesses Left: 3 Total: 0</div>
      <div class="infoText" id="hintPHolder" style="display: none;"> this is a placeholder for hints
        and to note that music is not yet implemeneted, for now see if you can guess the correct answer!
      </div>
      <img class="stop-and-play-duotone-icon" id="toggleMusic" alt="" src="../../../Assets/Stop_and_play_duotone.svg" />
      <img class="nextArrow" alt="" id="nextArr" src="../../../Assets/Right-Arrow.svg" hidden="" />
      
    </div>

    <script>
    async function getData() {
    const response = await fetch("../../../backend/src/current-game-data");
    const result = await response.json();
    return result;
}
async function startGame(numOfQuestions, numOfGuesses, difficulty) {
    const response = await fetch(("../../../backend/src/start/" + numOfQuestions + 
                    "/" + numOfGuesses + "/" + difficulty)); 
    return response;
}

function initButtonChoice(dataInput) {
    //stuff to draw choice button
    document.getElementById("op1").onclick() = async function () {
        await answerEvent(1);
        //disable button
    };
    document.getElementById("op2").onclick() = async function () {
        await answerEvent(2);
        //disable button
    };
    document.getElementById("op3").onclick() = async function () {
        await answerEvent(3);
        //disable button
    };
    document.getElementById("op4").onclick() = async function () {
        await answerEvent(4);
        //disable button
    };
}

async function answerEvent(integerInput) {
    var response = await answerMultipleChoiceQuestion(integerInput);
    var result = await response.json();
    data = await getData();
    if (result["isCorrect"] == true) {
        //disable all buttons
        //drawCorrectScreen(data)        //includes initButtonNext, updates the view with the new data except for the choice button
    } else if (result["correctChoice"] != null) {
        // disable all buttons
        //drawLastIncorrectScreen(data)  //includes initButtonNext, updates the view with the new data except for the choice button 
    } else {
        //drawNotLastIncorrectScreen(data); //updates the view with the new data except for the choice button
    }
}

async function initButtonNext(dataInput) {
    //stuff to draw next button
    document.getElementById("next").onclick() = function() {
        if (dataInput["hasGameEnded"]) {
            //go to the result screen
        } else {
            initButtonChoice(dataInput); 
        }
    }
}


  var data;
  async function fetchData() {   
    await startGame(5, 3, 1);
  try {
    // Assuming getData is an asynchronous function that returns a Promise
    data = await getData();
    console.log(data);
  } catch (error) {
    console.error("Error fetching data:", error);
  }
} 


// Call the function to initiate the asynchronous operation
fetchData();

    </script>
</body>

</html>